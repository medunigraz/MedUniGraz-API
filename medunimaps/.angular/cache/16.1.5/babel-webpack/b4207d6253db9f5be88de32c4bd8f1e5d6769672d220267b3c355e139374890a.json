{"ast":null,"code":"import { OpenlayersHelper } from './openlayershelper';\nimport { MapLayerBase } from './mapLayerBase';\nimport ol_format_GeoJSON from 'ol/format/GeoJSON';\nimport ol_style_Style from 'ol/style/Style';\nimport ol_style_Fill from 'ol/style/Fill';\nexport class MapFloor extends MapLayerBase {\n  constructor(mapService) {\n    super();\n    this.mapService = mapService;\n    this.Initialize();\n  }\n  Initialize() {\n    let res = OpenlayersHelper.CreateBasicLayer(new ol_style_Style({\n      fill: new ol_style_Fill({\n        color: 'rgba(64,64,64,1.0)'\n      })\n    }));\n    this.layerSource = res.layerSource;\n    this.layer = res.layer;\n  }\n  updateData(floorid) {\n    this.clear();\n    this.subscribeNewRequest(this.mapService.getFloors(floorid).subscribe(buildings => this.showFloors(buildings), error => console.log(\"ERROR deleteNode: \" + error)));\n    //this.layerSource.addFeatures((new ol.format.GeoJSON()).readFeatures(this.getDummyFloor()));\n  }\n\n  showFloors(features) {\n    console.log(\"MapFloors::showFloors\");\n    this.clear();\n    this.layerSource.addFeatures(new ol_format_GeoJSON().readFeatures(features));\n  }\n  getDummyFloor() {\n    return {\n      \"type\": \"FeatureCollection\",\n      \"features\": [{\n        'type': 'Feature',\n        \"id\": 12,\n        'geometry': {\n          \"type\": \"Polygon\",\n          \"coordinates\": [[[1722127.851590177, 5955257.966158812], [1722184.2836149659, 5955368.142969113], [1722202.4971256119, 5955359.185504861], [1722195.33115421, 5955345.450726341], [1722198.914139911, 5955343.360651349], [1722177.4162257058, 5955302.156315789], [1722173.2360757214, 5955303.649226498], [1722145.169354398, 5955249.307276702], [1722127.851590177, 5955257.966158812]]]\n        },\n        \"properties\": {}\n      }]\n    };\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}