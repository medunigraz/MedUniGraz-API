{"ast":null,"code":"import { UntypedFormControl } from '@angular/forms';\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\nimport { debounceTime } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/legacy-dialog\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/legacy-button\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/legacy-input\";\nexport let BeacondialogComponent = /*#__PURE__*/(() => {\n  class BeacondialogComponent {\n    constructor(dialogRef) {\n      this.dialogRef = dialogRef;\n      this.macInputVal = new UntypedFormControl();\n      this.nameInputVal = new UntypedFormControl();\n      this.batteryOutputVal = new UntypedFormControl();\n      this.mac = \"\";\n      this.name = \"\";\n      this.okButtonDisabled = true;\n      this.nearestSignal = undefined;\n    }\n    ngOnInit() {\n      let debouncedVal = this.macInputVal.valueChanges.pipe(debounceTime(400));\n      debouncedVal.subscribe(term => this.updateOkButtonEnabled());\n      let debouncedNameVal = this.nameInputVal.valueChanges.pipe(debounceTime(400));\n      debouncedNameVal.subscribe(term => this.updateOkButtonEnabled());\n      //TODO TEST!!!!!!\n      /*\n      this.macInputVal.valueChanges\n        .debounceTime(400).subscribe(term => this.updateOkButtonEnabled());\n           this.nameInputVal.valueChanges\n        .debounceTime(400).subscribe(term => this.updateOkButtonEnabled());\n        */\n    }\n\n    scan() {\n      console.log(\"BeacondialogComponent::scan()\");\n      if (this.nearestSignal && this.nearestSignal.value > -80) {\n        this.macInputVal.setValue(this.nearestSignal.mac);\n        this.nameInputVal.setValue(this.nearestSignal.name);\n        this.batteryOutputVal.setValue(this.nearestSignal.battery + \"%\");\n      } else {\n        this.macInputVal.setValue(\"\");\n        this.nameInputVal.setValue(\"\");\n      }\n    }\n    closeDialog() {\n      console.log(\"BeacondialogComponent::closeDialog()\");\n      this.dialogRef.close('Closed...');\n    }\n    save() {\n      console.log(\"BeacondialogComponent::save()\");\n      this.mac = this.macInputVal.value;\n      this.name = this.nameInputVal.value;\n      this.dialogRef.close('Save');\n    }\n    setMacAndName(mac, name) {\n      this.mac = mac;\n      this.name = name;\n      this.macInputVal.setValue(this.mac);\n      this.nameInputVal.setValue(this.name);\n    }\n    setNearestSignal(val) {\n      console.log(\"BeacondialogComponent::setNearestSignal() \" + +JSON.stringify(val));\n      this.nearestSignal = val;\n    }\n    updateOkButtonEnabled() {\n      this.okButtonDisabled = this.nameInputVal.value.length <= 0;\n    }\n  }\n  BeacondialogComponent.ɵfac = function BeacondialogComponent_Factory(t) {\n    return new (t || BeacondialogComponent)(i0.ɵɵdirectiveInject(i1.MatLegacyDialogRef));\n  };\n  BeacondialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BeacondialogComponent,\n    selectors: [[\"app-beacondialog\"]],\n    decls: 27,\n    vars: 4,\n    consts: [[1, \"dialogDiv\"], [\"type\", \"hidden\", \"tabindex\", \"0\", \"autofocus\", \"\"], [\"autocomplete\", \"off\", \"placeholder\", \"Id...\", \"matInput\", \"\", \"readonly\", \"\", 1, \"idInput\", 3, \"formControl\"], [\"autocomplete\", \"off\", \"placeholder\", \"Name...\", \"matInput\", \"\", 1, \"nameInput\", 3, \"formControl\"], [\"autocomplete\", \"off\", \"placeholder\", \"battery...\", \"matInput\", \"\", \"readonly\", \"\", 1, \"batteryOutput\", 3, \"formControl\"], [1, \"navigateDiv\"], [\"mat-button\", \"\", 1, \"ScanButton\", 3, \"click\"], [1, \"controlButtonTable\"], [\"mat-button\", \"\", 1, \"NavigateButton\", 3, \"click\"], [1, \"ControlButtonSpacer\"], [\"mat-button\", \"\", 1, \"NavigateButton\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", 1, \"closeDialogButton\", 3, \"click\"]],\n    template: function BeacondialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"input\", 1);\n        i0.ɵɵelementStart(2, \"div\")(3, \"h2\");\n        i0.ɵɵtext(4, \" Beacon \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"input\", 2)(6, \"input\", 3)(7, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function BeacondialogComponent_Template_button_click_9_listener() {\n          return ctx.scan();\n        });\n        i0.ɵɵelementStart(10, \"span\");\n        i0.ɵɵtext(11, \"Scan...\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"table\", 7)(13, \"tr\")(14, \"td\")(15, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function BeacondialogComponent_Template_button_click_15_listener() {\n          return ctx.closeDialog();\n        });\n        i0.ɵɵelementStart(16, \"span\");\n        i0.ɵɵtext(17, \"Cancel\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"td\");\n        i0.ɵɵelement(19, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"td\")(21, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function BeacondialogComponent_Template_button_click_21_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵelementStart(22, \"span\");\n        i0.ɵɵtext(23, \"Ok\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(24, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function BeacondialogComponent_Template_button_click_24_listener() {\n          return ctx.closeDialog();\n        });\n        i0.ɵɵelementStart(25, \"mat-icon\");\n        i0.ɵɵtext(26, \"close\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formControl\", ctx.macInputVal);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.nameInputVal);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.batteryOutputVal);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"disabled\", ctx.okButtonDisabled);\n      }\n    },\n    dependencies: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i3.MatLegacyButton, i4.MatIcon, i5.MatLegacyInput],\n    styles: [\".dialogDiv[_ngcontent-%COMP%]{position:relative;width:12em}.closeDialogButton[_ngcontent-%COMP%]{position:absolute;top:-42px;right:-22px;padding:0;min-width:3em;color:#51ae32}.NavigateButton[_ngcontent-%COMP%]{padding:0;min-width:5em;color:#51ae32;background-color:#90ee90}.idInput[_ngcontent-%COMP%]{width:100%}.nameInput[_ngcontent-%COMP%], .batteryOutput[_ngcontent-%COMP%]{margin-top:1em;width:100%}.controlButtonTable[_ngcontent-%COMP%]{padding:0;margin:0;border:0px;border-spacing:0;width:100%}.ScanButton[_ngcontent-%COMP%]{padding:0;width:100%;color:#51ae32;background-color:#90ee90}.ControlButtonSpacer[_ngcontent-%COMP%]{min-width:3em;width:100%}.navigateDiv[_ngcontent-%COMP%]{padding-top:1em;padding-bottom:1em}\"]\n  });\n  return BeacondialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}